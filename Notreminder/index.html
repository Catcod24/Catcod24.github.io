<!DOCTYPE html>
<html>
  <head>
    <title>Notification reminder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale = 1, height = device-height" />
  </head>
  <body>
    <button id = "btnn" onclick="sw" style="position: relative; top: 1px; left: 1px; font-size: 15px; background: red;">Notification: off</button>
    <script>
      var ofn;
      function notp(w){
        Notification.requestPermission().then((result) => {
          if (w == 'b'){
            return result;
          }
          if (result == 'granted' && fst == 0){
            let el = document.getElementById('btnn');
            el.innerHTML = 'Notification: on';
            el.style.background = 'chartreuse';
            ofn = 1;
          } else if(fst == 0) {
            let el = document.getElementById('btnn');
            el.innerHTML = 'Notification: off';
            el.style.background = 'red';
            ofn = 0;
          }
          if (fst == 1){
            if (onf == 1){
              onf = 0;
              let el = document.getElementById('btnn');
              el.innerHTML = 'Notification: off';
              el.style.background = 'red';
            } else {
              let el = document.getElementById('btnn');
              el.innerHTML = 'Notification: on';
              el.style.background = 'chartreuse';
              ofn = 1;
            }
          }
        });
      }
      function sw(){
        if (onf == 0 && notp('b') == 'granted'){
          let el = document.getElementById('btnn');
          el.innerHTML = 'Notification: on';
          el.style.background = 'chartreuse';
          ofn = 1;
        } else{
          onf = 0;
          let el = document.getElementById('btnn');
          el.innerHTML = 'Notification: off';
          el.style.background = 'red';
        }
      }
    </script>
  </body>
</html>
